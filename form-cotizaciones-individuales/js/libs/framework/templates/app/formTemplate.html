<style>
    .ribbon-banner {
        position: absolute;
        bottom: 0px;
        margin: 5px;
        height: 20px;
        text-align: center;
        opacity: 0.7;
        font-size: 10px;
        font-weight: 700;
        z-index: 2000;
    }
</style>
<div id="version-container" class="ribbon-banner"></div>
<div id="form-div" class="row-fluid">
    <div class="span12">
        <!--PAGE CONTENT BEGINS-->

        <div >
            <div class="row-fluid">
                <div class="span12">
                    <!--PAGE CONTENT BEGINS-->
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="widget-box" style="margin: 0px">

                                <div class="widget-body">
                                    <div class="widget-main">
                                        <div class="row-fluid">
                                            <div id="fuelux-wizard" class="row-fluid hide" data-target="#step-container" >
                                                <ul class="wizard-steps">

                                                    <li data-target="#step1" id="sep1LI" class="active">
                                                        <span class="step">1</span>
                                                        <span class="title">Datos Generales</span>
                                                    </li>

                                                    <li data-target="#step2">
                                                        <span class="step">2</span>
                                                        <span class="title">Datos Individuos</span>
                                                    </li>

                                                    <li data-target="#step3">
                                                        <span class="step">3</span>
                                                        <span class="title">Detalle Cotizacion</span>
                                                    </li>
                                                </ul>

                                            </div>

                                            <hr />

                                            <div class="step-content row-fluid position-relative" id="step-container" style="overflow-y:auto;overflow-x:hidden;height:20px;display: block; position: relative;">

                                                <div class="step-pane active" id="step1">
                                                    <form class="form-horizontal" id="valid-form-1" method="get">
                                                        <div class="row-fluid">
                                                            <div class="control-group span6">
                                                                <label class="control-label" for="contacto[nombre]">Nombre:</label>
                                                                <div class="controls">
                                                                    <div class="span12">
                                                                        <input id="txtNombre" name="contacto[nombre]" type="text" placeholder="Ingrese el nombre del contacto..." class="input-mask-text" value=""/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="control-group span6">
                                                                <label class="control-label" for="contacto[apellido]">Apellido <i class="icon-asterisk red" style="font-size: 10px;vertical-align: 5px;"></i>:</label>
                                                                <div class="controls">
                                                                    <div class="span12">
                                                                        <input id="txtApellido" name="contacto[apellido]" type="text" placeholder="Ingrese el Apellido del contacto..." class="input-mask-text" value=""/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row-fluid">
                                                            <div class="control-group span6" >
                                                                <label class="control-label" for="nroProceso">Nro. Trámite<i class="icon-asterisk red" style="font-size: 10px;vertical-align: 5px;"></i>:</label>
                                                                <div class="controls">
                                                                    <div class="span12">
                                                                        <input id="txtProceso" maxlength="100" name="nroProceso" type="text" placeholder="Ingrese un nro. de trámite..." value=""/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="control-group span6">
                                                                <label class="control-label" for="cotizado">Contacto Cotizado:</label>
                                                                <div class="controls">
                                                                    <div class="span12">
                                                                        <label>
                                                                            <input id="cotizado" name="cotizado" type="checkbox" class="ace-switch ace-switch-5" checked="true"/>
                                                                            <span class="lbl"></span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row-fluid">
                                                        	<div class="control-group span6">
                                                                <label class="control-label" for="finalizado">Cerrado sin Venta:</label>
                                                                <div class="controls">
                                                                    <div class="span12">
                                                                        <label>
                                                                            <input id="chkFinalizado" name="finalizado" type="checkbox" class="ace-switch ace-switch-5" checked="true"/>
                                                                            <span class="lbl"></span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br/>
                                                        <div class="row-fluid">
                                                            <div id="panelMails" class="control-group span8" >
                                                                <i class="icon-asterisk red" style="font-size: 10px;vertical-align: 5px;"></i> Complete al menos un campo obligatorio
                                                            </div>
                                                            <div class="control-group span4" style="float: right">
                                                            	<button id="btnEdit" class="btn btn-small btn-light" onclick="return false;" {{#unless prospectoIncompleto}}style="display: none;"{{/unless}}>
						                                           <i class="icon-edit"></i>
						                                           <b>Editar Prospecto</b>
						                                       </button>
                                                                <button id="btnSearchCotizaciones" class="btn btn-danger btn-next">
                                                                    <i class="icon-ok bigger-110"></i>
                                                                    Buscar
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <div id="resultSearchCot"></div>
                                                    </form>
                                                </div>

                                                <!-- STEP 2 -->
                                                <div class="step-pane" id="step2">
                                                </div>

                                                <div class="step-pane" id="step3">

                                                    <form id="valid-form-3" class="form-horizontal" method="get">

                                                        <input name="user[id]"              value="{{userId}}" type="hidden">
                                                        <input name="user[username]"        value="{{userName}}" type="hidden">
                                                        <input name="user[name]"            value="{{prettifyCN userId}}" type="hidden">
                                                        
                                                        <input name="observacion"           value="" type="hidden">
                                                        <input name="medio[id]"             value="14" type="hidden">
                                                        <input name="medio[numero]"         value="" type="hidden">
                                                        <input name="canalOrigen[id]"       value="2" type="hidden" data-type="integer">
                                                        <input name="canalOrigen[subCanal]" value="{{formatSucursal subsidiary}}" type="hidden">
                                                        
                                                        <input name="sucursal[id]"          value="{{subsidiaryId}}" type="hidden">
                                                        <input name="sucursal[descripcion]" value="{{subsidiary}}" type="hidden">
                                                        
                                                        <input name="finalizado" value="0" type="hidden">
                                                        <input name="afiContactado"         value="1" type="hidden">

                                                        <input name="process[variables][actorId]"       value="{{userId}}" type="hidden">
                                                        <input name="process[variables][workContext]"   value="{{workcontext}}" type="hidden">
                                                        <input name="process[variables][finalizado]"    value="true" type="hidden">
                                                        
                                                        <input name="process[variables][processInfo][id]"  value="0" type="hidden">
                                                        <input name="process[variables][processInfo][name]"  value="{{processNameJBPM}}" type="hidden">
                                                        <input name="process[variables][processInfo][description]"  value="{{processNameJBPM}}" type="hidden">
                                                        <input name="process[variables][processInfo][credencial]"  value="PRO-{{entityId}}" type="hidden">
                                                        <input name="process[variables][processInfo][vip]"  value="false" type="hidden">
                                                        <input name="process[variables][processInfo][afiliado]"  value="{{entity.nombreCompleto}}" type="hidden">
                                                        
                                                        <input name="process[version]"  value="1" type="hidden">
                                                        <input name="process[processName]"  value="{{processNameJBPM}}" type="hidden">
                                                        <input name="process[status]"  value="Running" type="hidden">
                                                        <input name="process[workContext]"  value="{{workcontext}}" type="hidden">
                                                        <input name="process[credencial]"  value="{{entity.contraPresmed}}" type="hidden">
                                                        <input name="process[afiliado]"  value="{{entity.nombreCompleto}}" type="hidden">
                                                        <input name="process[vip]"  value="{{#if entity.vip}}true{{else}}false{{/if}}" type="hidden">
                                                        <input name="process[currentNodeName]"  value="{{consulta.motivo.descripcion}}" type="hidden">
                                                        <input name="process[ambitoGestion]"  value="{{subsidiary}}" type="hidden">
                                                        <input name="process[customerName]"  value="{{entity.nombreCompleto}}" type="hidden">
                                                        
                                                        <input id="id" type="hidden" value="{{id}}"/>
                                                        <input id="motive" type="hidden" value="{{motive}}"/>
                                                        
                                                        <div id="div-form-3"></div>   

                                                    </form>
                                                    
                                                </div>

                                            </div>

                                            <hr />
                                            <div id="botonesWizard" class="row-fluid wizard-actions">
                                            
                                            	<button id="btnFinalizar" class="btn btn-danger" onclick="return false;">

                                                    Finalizar
                                                    <i class=""></i>
                                                </button>

                                                <button  class="btn btn-prev" onclick="return false;">

                                                    Volver
                                                    <i class="icon-arrow-left"></i>
                                                </button>

                                                <button id="btnNext" class="btn btn-danger btn-next" data-last="Finalizar " onclick="return false;">
                                                    Siguiente

                                                    <i class="icon-arrow-right icon-on-right"></i>
                                                </button>

                                                <div id="actionSelected" class="controls input-append hide" style="float: right;margin-left: 5px;">
                                                    <input id="estado[descripcion]" type="hidden" value=""/>
                                                    <select id="ventaEstado" name="estado[id]" style="width: 200px;">
                                                        <option id="" data-status="" data-status-description="" value="">--Seleccione una acción--</option>
                                                        <option value="1">Cerrado con Venta</option>
                                                        <option value="2">Cerrado sin Venta</option>
                                                        <option value="3">Entrevistar Individuo</option>
                                                        <option value="4">Entregar Informaci&oacute;n Cotizaci&oacute;n</option>
                                                    </select>
                                                    <span id="btnSaveAndEndTask" class="add-on btn-danger" style="cursor: pointer"> <i class="icon-arrow-right icon-on-right"></i> </span>
                                                </div>

                                            </div>
                                        </div>
                                    </div><!--/widget-main-->
                                </div><!--/widget-body-->
                            </div>
                        </div>
                    </div>
                </div><!--/.span-->
            </div><!--/.row-fluid-->
        </div>

    </div>
</div>

<div id="modal-abm-prospecto" class="modal hide" tabindex="-1" style="width: 80%;margin-left: -40%;height:80%;">
    <div class="row-fluid">
        <div class="span12">
            <div class="widget-box" style="border-bottom: none;">
                <div class="widget-header widget-header-grey widget-header-flat" style="border-top: none;">
                    <h4 id="abmProspectoModal" class="lighter red">
                        Prospecto
                    </h4>
                    <span class="widget-toolbar">
                    </span>                    
                    <span class="widget-toolbar">
                        <a href="#" data-dismiss="modal">
                            <i class="icon-remove"></i>
                        </a>
                    </span>
                </div>

                <div class="widget-body grey" style="border: none;">
                    <div class="widget-main" style="padding: 0px;">
                        <div class="row-fluid">
                            <form id="formABMProspecto" action="" method="post" target="iframeABMProspecto">
                                <iframe id="iframeABMProspecto" name="iframeABMProspecto" class="span12" src=""
                                        frameborder="0" scrolling="no" style="width: 100%;
                                background-image:url('../static/images/loading_bubble.gif');
                                background-repeat:no-repeat;
                                background-attachment:relative;
                                background-position:center;
                                height: 26em !important;">
                                </iframe>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modal-form-show" class="modal hide" tabindex="-1" style="width: 80%; margin-left: -40%;">
    <div class="row-fluid">
        <div class="span12">
            <div class="widget-box" style="border-bottom: none;">
                <div class="widget-header widget-header-blue widget-header-flat" style="border-top: none;">
                    <h4 class="grey">
                        Vista Datos del Proceso PDF
                    </h4>
                    <span class="widget-toolbar">
                        <a href="#" data-dismiss="modal">
                            <i class="icon-remove"></i>
                        </a>
                    </span>
                </div>
                <div class="widget-body blue" style="border: none;">
                    <div class="widget-main">
                        <div class="row-fluid">
                           <form id="formShowPDF" action="" method="post" target="iframeShow">
                               <iframe id="iframeShow" name="iframeShow" class="span12" src="" frameborder="0" scrolling="no" style="width: 100%;
                                background-image:url('../static/images/loading_bubble.gif');
                                background-repeat:no-repeat;
                                background-attachment:relative;
                                background-position:center;">
                               </iframe>
                           </form>
                        </div>
                     </div>
                </div>
           </div>
         </div>
    </div>
</div>

<script src="../static/js/libs/thirds/jquery/jquery.gritter.min.js"></script>
<script src="../static/js/libs/thirds/jquery/jquery.autosize-min.js"></script>
<script src="../static/js/libs/thirds/jquery/jquery.inputlimiter.1.3.1.min.js"></script>
<script src="../static/js/libs/thirds/jquery/jquery.overlay.js"></script>
<script src="../static/js/libs/thirds/jquery/jquery.textcomplete.js"></script>

<script src="../static/js/libs/thirds/jquery/fuelux/fuelux.wizard.min.js"></script>
<script src="../static/js/libs/thirds/jquery/jquery.validate.min.js"></script>
<script src="../static/js/libs/thirds/jquery/additional-methods.min.js"></script>
<script src="../static/js/libs/thirds/jquery/bootbox.min.js"></script>
<script src="../static/js/libs/thirds/jquery/jquery.maskedinput.min.js"></script>
<script src="../static/js/libs/thirds/jquery/select2.min.js"></script>

<script type="text/javascript" src="../static/js/libs/thirds/jquery/jspdf.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/adler32cs.js/adler32cs.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/FileSaver.js/FileSaver.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/Blob.js/Blob.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/jspdf.plugin.addimage.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/jspdf.plugin.cell.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/jspdf.plugin.standard_fonts_metrics.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/jspdf.plugin.sillysvgrenderer.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/jspdf.plugin.split_text_to_size.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/jspdf.plugin.from_html.js"></script>
<script type="text/javascript" src="../static/js/libs/thirds/jquery/jspdf/basic.js"></script>

<script type="text/javascript">
    //$('#txtmailparticular').mask('(999) 999-9999');
    //$("#celPais").mask("99", {placeholder: '54'});
    $("#txtCuit").mask("99-99999999-9");

    $(".input-mask-text").bind("input", function(event) {
        var out = "";
        var str = this.value;
        for (var i = 0; i < str.length; i++) {
            if (!(/[0-9]/.test(str.charAt(i)))) {
                out = out.concat(str.charAt(i));
            }
        }
        this.value = out;
    });

    $(".input-mask-text-numbers").bind("input", function(event) {
        var out = "";
        var str = this.value;
        for (var i = 0; i < str.length; i++) {
            if ((/[0-9a-zA-Z &ñÑáéíóú]/.test(str.charAt(i)))) {
                out = out.concat(str.charAt(i));
            }
        }
        this.value = out;
    });

    $(".input-mask-numbers").bind("input", function(event) {
        var out = "";
        var str = this.value;
        for (var i = 0; i < str.length; i++) {
            if (/[0-9]/.test(str.charAt(i))) {
                out = out.concat(str.charAt(i));
            }
        }
        this.value = out;
    });

    window.onresize = function() {
        if ($(window).height() < 100) {
            var elemToChange = document.getElementById("page-content");
            elemToChange.style.height = parent.document.body.clientHeight + "px";
        } else {
            var elemToChange = document.getElementById("page-content");
            elemToChange.style.height = $(window).height() + "px";
        }
    };

    if ($(window).height() < 100) {
        var elemToChange = document.getElementById("page-content");
        elemToChange.style.height = parent.document.body.clientHeight + "px";
    } else {
        var elemToChange = document.getElementById("page-content");
        elemToChange.style.height = $(window).height() + "px";
    }

    $(function() {

        $('[data-rel=tooltip]').tooltip();

        $(".select2").css('width', '150px').select2({
            allowClear : true
        }).on('change', function() {
            $(this).closest('form').validate().element($(this));
        });

        $('#fuelux-wizard').ace_wizard();

        $.mask.definitions['~'] = '[+-]';
        $('#phone').mask('(999) 999-9999');

        $('#modal-wizard .modal-header').ace_wizard();
        $('#modal-wizard .wizard-actions .btn[data-dismiss=modal]').removeAttr('disabled');
    });

    window.onresize = function() {
        var elemToChange = document.getElementById("step-container");
        elemToChange.style.height = $(window).height() - 170 + "px";
    };

    var elemToChange = document.getElementById("step-container");
    elemToChange.style.height = $(window).height() - 170 + "px";

    $(function() {

        $('textarea[class*=autosize]').autosize({
            append : "\n"
        });
        $('textarea[class*=limited]').each(function() {
            var limit = parseInt($(this).attr('data-maxlength')) || 100;
            $(this).inputlimiter({
                "limit" : limit,
                remText : '%n disponible%s...',
                limitText : 'caracteres maximos : %n.'
            });
        });

        $(".text").css("width", "100%");
        $("input").keydown(function(e) {
            if (e.keyCode == 219) {
                return false;
            } else {
                return true;
            }
        });
        $('textarea').keydown(function(e) {
            if (e.keyCode == 219) {
                return false;
            } else {
            }
        });
        
        $("#btnNext").prop('disabled', true);
    });

    $.extend(jQuery.validator.messages, {
        required : "Este campo es obligatorio.",
        remote : "Por favor, rellena este campo.",
        email : "Ingrese una dirección de correo válida",
        url : "Por favor, escribe una URL válida.",
        date : "Por favor, escribe una fecha válida.",
        dateISO : "Por favor, escribe una fecha (ISO) válida.",
        number : "Por favor, escribe un número entero válido.",
        digits : "Por favor, escribe sólo dígitos.",
        creditcard : "Por favor, escribe un número de tarjeta válido.",
        equalTo : "Por favor, escribe el mismo valor de nuevo.",
        accept : "Por favor, escribe un valor con una extensión aceptada.",
        maxlength : jQuery.validator.format("Por favor, no escribas más de {0} caracteres."),
        minlength : jQuery.validator.format("Por favor, no escribas menos de {0} caracteres."),
        rangelength : jQuery.validator.format("Por favor, escribe un valor entre {0} y {1} caracteres."),
        range : jQuery.validator.format("Por favor, escribe un valor entre {0} y {1}."),
        max : jQuery.validator.format("Por favor, escribe un valor menor o igual a {0}."),
        min : jQuery.validator.format("Por favor, escribe un valor mayor o igual a {0}.")
    });
    
    function cargarElTipoDeTelefono(){
        var tipoTelefono = $("#tipoTelefono").val();
        if (tipoTelefono === 'L') {
            // $('#celExt').prop('disabled', false);
            $('#celExt').prop('type', 'text');
        } else {
            // $('#celExt').prop('disabled', true);
            $('#celExt').prop('type', 'hidden');
        }
    };
    
    function cerrarGuardadoOK(entityIdName) {
        $("#modal-abm-prospecto").modal("hide");
    }

</script>