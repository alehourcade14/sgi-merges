<style>
	#RUDIModal {
		margin-top: -2%!important;
	}
	
	#imagenesContainer {
		height: 108px!important;
	}
</style>

<div class="row-fluid" id="panelDatosVenta">
<form  id="validation-formProductor"  class="form-horizontal"method="get">
															
															
															
															<div class="row-fluid">
																<div class="control-group span3">
																	<label class="control-label" for="productor[apellido]">Apellido:</label>
																	<div class="controls">
																		<div class="span12">
																			<input id="apellidoProductor" name="productor[apellido]" type="text" readonly="true" value="{{productor.apellido}}" style="width:150px"/>
																		</div>
																	</div>
																</div>
																<div class="control-group span3">
																	<label class="control-label" for="productor[nombre]">Nombre:</label>
																	<div class="controls">
																		<div class="span12">
																			<input id="nombreProductor" name="productor[nombre]" type="text" readonly="true" value="{{productor.nombre}}" style="width:170px" />
																		</div>
																	</div>
																</div>
																
																<div class="control-group span6">
																	<label class="control-label" for="productor[email]">Email:</label>
																	<div class="controls">
																		<div class="span12">
																			<input id="productorEmail" name="productor[email]" type="text" style="width:250px" readonly="true" value="{{productor.emails.0.direccion}}"/>
																		</div>
																	</div>
																</div>
																
															</div>
															
															<hr />
															
															<br />
															
															<div class="row-fluid">
																
																<div class="control-group span6">
																	<label class="control-label" for="tipoDeVta">Tipo de venta<i class="icon-asterisk red" style="font-size: 10px;vertical-align: 5px;"></i>:</label>
																	<div class="controls">
																		<div class="span12">
																			{{#if isCreate}}
																			<select id="tipoDeVta" class="span8" name="[datosVenta][tipo]" data-type="integer">
			                                                                    <option value="">Seleccione...</option>
			                                                                    {{#hasRole 'SGI_BROKER'}}
			                                                                      <option value="1">Directa</option>
			                                                                    {{else}}
			                                                                      {{#hasRole 'PAS_VTA_DIRECTA'}}
			                                                                        <option value="1">Directa</option>
			                                                                      {{/hasRole}}
			                                                                      {{#hasRole 'PAS_VTA_ASISTIDA'}}
			                                                                        <option value="2">Asistida</option>
			                                                                      {{/hasRole}}
			                                                                    {{/hasRole}}
			                                                                </select>
																			{{else}}
																			<select id="tipoDeVta" class="span8" name="[datosVenta][tipo]" data-type="integer">
			                                                                    <option value="">Seleccione...</option>
			                                                                    {{#hasRole 'SGI_BROKER'}}
			                                                                      <option value="1">Directa</option>
			                                                                    {{else}}
			                                                                      {{#hasRole 'PAS_VTA_DIRECTA'}}
			                                                                        <option value="1">Directa</option>
			                                                                      {{/hasRole}}
			                                                                      {{#hasRole 'PAS_VTA_ASISTIDA'}}
			                                                                        <option value="2">Asistida</option>
			                                                                      {{/hasRole}}
			                                                                    {{/hasRole}}
			                                                                </select>
																			{{/if}}
																		</div>
																	</div>
																</div>
															</div>
															
															<div class="row-fluid">
																<div id="divSelAsesorVtaAsistidaId" hidden>
																	<div class="row-fluid">
																		<div class="span5 show-select-asesor-vta-asistida">
																			<label class="control-label" id="asesorVtaAsistidaLbl" for="asesorVtaAsistida">Asesor:
																			</label>
																			<div class="controls">
																				<div class="input-append span12">
																					<span class="span9">
																						<div id="asesorContainerId">
																							<select id="selAsesorId" name="selAsesor" data-type="string" data-serializable="false" style="width: 117%;">
																								<option value="0">Seleccione un Asesor</option>
																							</select>
																						</div>
																					</span>
																				</div>
																			</div>
																		</div>
																		<div class="span5">
																			<div id="asesorDetailContainer">
																			</div>
																		</div>
																	</div>
																</div>
																<!--/selAsesorVtaAsistida-->
															</div>
															<hr />
															
															<div class="row-fluid">
		                                                        <label id="labelProdActivos" class="control-label">Productos activos:</label>
		
		                                                        <div id="divCheckboxProductosActivosId" class="span3">
		                                                            <label>
		                                                                <input id="checkboxProductosActivosId"
		                                                                       class="ace-switch ace-switch-2" type="checkbox"
																			   value="true"
																			   data-serializable="false"/>
		                                                                <span class="lbl"></span>
		                                                            </label>
		                                                        </div>
		                                                    </div>
		                                                    <hr class="dotted"/>
		                                                    <div id="divProductosActivosId" hidden>
		                                                        <br/>
		                                                        <div class="row-fluid">
		                                                            <div class="span12">
		                                                                <div class="row-fluid">
		                                                                    <div>
		                                                                        <div class="row-fluid">
		                                                                            <div class="span3">
		                                                                                <div class="control-group">
		                                                                                    <label class="control-label">SMG:</label>
		
		                                                                                    <div class="span3" style="position:relative;left:26px">
		                                                                                        <label>
		                                                                                            <input id="checkboxTipoSMGId"
		                                                                                                   class="ace-switch ace-switch-2"
																										   type="checkbox" value="true"
																										   data-serializable="false"/>
		                                                                                            <span class="lbl"></span>
		                                                                                        </label>
		                                                                                    </div>
		                                                                                </div>
		                                                                            </div>
		                                                                        </div>
		                                                                    </div>
		                                                                </div>
		                                                                <div class="row-fluid">
		                                                                    <div id="tipoSMG" hidden>
		                                                                        <div class="row-fluid">
		                                                                            <div class="span3">
		                                                                                <div class="control-group">
		                                                                                    <label class="control-label">Seguros:</label>
		
		                                                                                    <div class="span3" style="position:relative;left:26px">
		                                                                                        <label>
		                                                                                            <input id="checkbox-seguro"
		                                                                                                   class="ace-switch ace-switch-2"
		                                                                                                   type="checkbox"
		                                                                                                   data-errorTarget="checkbox-seguro-error"
																										   name="checkbox-seguro"
																										   data-serializable="false"
		                                                                                            />
		                                                                                            <span class="lbl"></span>
		                                                                                            <!--div id="msgProductoSeguro" class="custom-help" style="display:none;">Debe seleccionar al menos un producto.</div-->
		                                                                                        </label>
		                                                                                    </div>
		                                                                                </div>
		                                                                            </div>
		                                                                            <div class="checkbox-seguro-error custom-help"/>																			
		                                                                            <div class="span4 show-checkbox-seguro">
		                                                                                <div class="control-group">
		                                                                                    <label class="control-label">P&oacute;liza Nro
		                                                                                        <i class="icon-asterisk red show-icon-asterisk"
		                                                                                              style="font-size: 10px;vertical-align: 5px;"></i>:</label>
		
		                                                                                    <div class="controls">
		                                                                                        <div class="span12">
		                                                                                            <input id="polizaSeguro" 
		                                                                                                   name="[datosVenta][seguros][poliza]"
		                                                                                                   type="number"
		                                                                                                   placeholder="Ingrese p&oacute;liza..."
		                                                                                                   class="input-mask-number"
																										   style="width: 150px;"
																										   data-type="integer"/>
		                                                                                        </div>
		                                                                                    </div>
		                                                                                </div>
		                                                                                <div class="control-group">
		                                                                                    <label class="control-label"
		                                                                                           for="productos">Producto:<i
		                                                                                            class="icon-asterisk red show-icon-asterisk"
		                                                                                            style="font-size: 10px;vertical-align: 5px;"></i>:</label>
		
		                                                                                    <div class="controls">
		                                                                                        <div class="input-append span12">
		                                                                                        <span class="span12">
		                                                                                            <select id="productoSeguro" class="span12" name="[datosVenta][seguros][producto]" data-type="notEmptyString">
		                                                                                                <option value="">Seleccione...</option>
		                                                                                                <option value="AP">AP</option>
		                                                                                                <option value="Otros">Otros</option>
		                                                                                            </select>
		                                                                                        </span>
		                                                                                        </div>
		                                                                                    </div>
		                                                                                </div>
		                                                                            </div>
		                                                                            <div class="span5 show-checkbox-seguro">
		                                                                                <div class="control-group">
		                                                                                    <label class="control-label"
		                                                                                           for="fecha">Fecha de vigencia<i
		                                                                                            class="icon-asterisk red show-icon-asterisk"
		                                                                                            style="font-size: 10px;vertical-align: 5px;"></i>:</label>
		
		                                                                                    <div class="controls">
		                                                                                        <div class="input-append span12">
		                                                                                            <input id="fechaSeguros"
		                                                                                                   name="[datosVenta][seguros][fechaVigencia]"
		                                                                                                   class="input-small date-picker-2 input-mask-date"
		                                                                                                   type="text"
																										   data-date-format="dd-mm-yyyy"
																										   data-type="date"/>
		                                                                                            <span class="add-on"> <i class="icon-calendar"></i> </span>
		                                                                                        </div>
		                                                                                    </div>
		                                                                                </div>
		                                                                            </div>
		                                                                        </div>
		                                                                        <div class="row-fluid">
		                                                                            <div class="span3">
		                                                                                <div class="control-group">
		                                                                                    <label class="control-label">LIFE:</label>
																							
		                                                                                    <div class="span3" style="position:relative;left:26px">
		                                                                                        <label>
		                                                                                            <input id="checkbox-life"
		                                                                                                   class="ace-switch ace-switch-2"
		                                                                                                   type="checkbox"
		                                                                                                   data-errorTarget="checkbox-life-error"
																										   name="checkbox-life"
																										   data-serializable="false"
		                                                                                            />
		                                                                                            <span class="lbl"></span>
		                                                                                            <!--div id="msgProductoLife" class="custom-help" style="display:none;">Debe seleccionar al menos un producto.</div-->
		                                                                                        </label>
		                                                                                    </div>
		                                                                                </div>
		                                                                            </div>
		                                                                            <div class="checkbox-life-error custom-help"/>
		                                                                            <div class="span4 show-checkbox-life">
		                                                                                <div class="control-group">
		                                                                                    <label class="control-label">P&oacute;liza Nro
		                                                                                        <i class="icon-asterisk red show-icon-asterisk"
		                                                                                              style="font-size: 10px;vertical-align: 5px;"></i>:</label>
		
		                                                                                    <div class="controls">
		                                                                                        <div class="span12">
		                                                                                            <input id="polizaLife"
		                                                                                                   name="[datosVenta][life][poliza]"
		                                                                                                   type="number"
		                                                                                                   placeholder="Ingrese p&oacute;liza..."
		                                                                                                   class="input-mask-number"
																										   style="width: 150px;"
																										   data-type="integer"/>
		                                                                                        </div>
		                                                                                    </div>
		                                                                                </div>
		                                                                            </div>
		                                                                            <div class="span5 show-checkbox-life">
		                                                                                <div class="control-group">
		                                                                                    <label class="control-label"
		                                                                                           for="fecha">Fecha de vigencia<i
		                                                                                            class="icon-asterisk red show-icon-asterisk"
		                                                                                            style="font-size: 10px;vertical-align: 5px;"></i>:</label>
		
		                                                                                    <div class="controls">
		                                                                                        <div class="input-append span12">
		                                                                                            <input id="fechaLife"
		                                                                                                   name="[datosVenta][life][fechaVigencia]"
		                                                                                                   class="input-small date-picker-2 input-mask-date"
		                                                                                                   type="text"
																										   data-date-format="dd-mm-yyyy"
																										   data-type="date"/>
																									<span class="add-on"> <i class="icon-calendar"></i> </span>
		                                                                                        </div>
		                                                                                    </div>
		                                                                                </div>
		                                                                            </div>
		                                                                        </div>
		                                                                    </div><!--/tipoSMG-->
		                                                                    <div id="tipoNoSMG">
		                                                                        <div class="row-fluid">
		                                                                            <div class="control-group">
		                                                                                <label class="control-label">Aseguradora<i
		                                                                                        class="icon-asterisk red show-icon-asterisk"
		                                                                                        style="font-size: 10px;vertical-align: 5px;"></i>:</label>
																						
		                                                                                <div class="controls">
		                                                                                    <span class="span4">
		                                                                                        <select id="aseguradoraId" name="[datosVenta][aseguradora][id]" data-type="integer">
		                                                                                        </select>
		                                                                                    </span>
		                                                                                </div>
		                                                                            </div>
		                                                                        </div>
		                                                                        <div class="row-fluid">
		                                                                            <div class="control-group">
		                                                                                <label id="labelPoliza" class="control-label">P&oacute;liza:</label>
		
		                                                                                <div class="controls">
																							<a class="btn btn-danger btn-mini botonCargaDeArchivos">
																								<i class="icon-cloud-upload icon-2x icon-only" data-rel="tooltip" data-title="Adjuntar archivos" data-placement="bottom"></i>
																							</a>
																							&nbsp;
																							<label class="inline right-label">
																								<small id="cantidadArchivosDatosVentaDetalle">Cantidad de archivos adjuntos: {{archivosParaCargar.length}}</small>
		                                                                                        <!--input id="cantidadArchivosInput" name="cantidadArchivosInput"  value=""-->
		                                                                                        <div id="msgCantidadArchivos" class="custom-help" style="display:none;">Debe adjuntar al menos un archivo.</div>
																							</label>
		                                                                                </div>
		                                                                            </div>
		                                                                        </div>
		                                                                        <div class="row-fluid">
		                                                                            <div class="control-group">
		                                                                                <label class="control-label"
		                                                                                       for="fecha">Fecha de vigencia<i
		                                                                                        class="icon-asterisk red show-icon-asterisk"
		                                                                                        style="font-size: 10px;vertical-align: 5px;"></i>:</label>
		
		                                                                                <div class="controls">
		                                                                                    <span class="span12">
		                                                                                        <div class="input-prepend">
		                                                                                            <span class="add-on">
		                                                                                                <i class="icon-calendar"></i>
		                                                                                            </span>
		                                                                                            <input id="fechaAseguradora"
		                                                                                                   name="[datosVenta][aseguradora][fechaVigencia]"
		                                                                                                   type="text"
		                                                                                                   class="span8 date-picker-2 input-mask-date"
																										   data-date-format="dd-mm-yyyy"
																										   data-type="date"/>
		
		                                                                                        </div>
		                                                                                    </span>
		                                                                                    <!--div class="span12">
		                                                                                        <input id="fechaAseguradora" type="text" name="fechaAseguradora" class="input-small date-picker input-prepend" data-date-format="dd-mm-yyyy" />
		                                                                                        <span class="btn btn-small"><i class="icon-calendar bigger-110"></i></span>
		                                                                                    </div-->
		                                                                                </div>
		
		
		                                                                            </div>
		                                                                        </div>
		                                                                    </div><!--/tipoNoSMG-->
		                                                                </div>
		                                                            </div>
		                                                        </div>
		                                                        <hr class="dotted"/>
		
		                                                    </div><!--/divProductosActivosId-->
															
															
															<div class="row-fluid">	
																<div class="control-group">
                                                                     <label class="control-label" for="observacion">Observación</label>
																	 
                                                                     <div class="controls">
                                                                          <textarea id="observacion" name="observacion" class="span12 limited" id="form-field-9" data-maxlength="255" maxlength="255" style="width: 50%; height: 75px"></textarea>
                                                                     </div>
                                                                </div>
																
															</div>
													
													</form>
													</div>
													
													<div class="row-fluid" >
														
														<button id="btnGrabarDatosVenta" class="btn btn-danger btn-small pull-right btnSaveEdit" type="button" style="margin-right:15px">
															&nbsp;Grabar
														</button>
														
													</div>
													
<div id="RUDIModal" ></div>
<div id="RUDIModalDetalle" ></div>

<div id="datosVentaDetalleContainer"></div>

<script src="../static/js/date-time/bootstrap-datepicker.min.js"></script>

<script type="text/javascript" src="../static/js/smmp-submotivos.js"></script>
<script src="../static/js/libs/thirds/jquery/date-time/locales/bootstrap-datepicker.es.js"></script>
<script src="../static/js/libs/thirds/jquery/date-time/moment.min.js"></script>

<script type="text/javascript">
	
	$("#txtCuit").mask("99-99999999-9");
	
	$("#txtCuit").bind("keypress", function(event) {
		event.preventDefault();
		if ( event.keyCode === 13 ) {
			return false;
		}
	});


	$(".input-mask-text").bind("input", function(event) {
		var out = "";
		var str = this.value;
		for (var i = 0; i < str.length; i++) {
			if (!(/[0-9]/.test(str.charAt(i)))) {
				out = out.concat(str.charAt(i));
			}
		}
		this.value = out;
	});

	$(".input-mask-text-numbers").bind("input", function(event) {
		var out = "";
		var str = this.value;
		for (var i = 0; i < str.length; i++) {
			if ((/[0-9a-zA-Z &ñÑáéíóú]/.test(str.charAt(i)))) {
				out = out.concat(str.charAt(i));
			}
		}
		this.value = out;
	});

	$(".input-mask-numbers").bind("input", function(event) {
		var out = "";
		var str = this.value;
		for (var i = 0; i < str.length; i++) {
			if (/[0-9]/.test(str.charAt(i))) {
				out = out.concat(str.charAt(i));
			}
		}
		this.value = out;
	});

	$('.date-picker').datepicker({
		language : 'es',
		weekStart : 0
	}).next().on(ace.click_event, function() {
		$(this).prev().focus();
	});
	
	$(".step-content").scroll(function () {
	    $('#fechaAseguradora').datepicker('hide');
	    $('#fechaSeguros').datepicker('hide');
	    $('#fechaLife').datepicker('hide');
	});
	
	$('.date-picker').on('changeDate', function(ev){
		$(this).datepicker('hide');
	});

	//Fecha de vigencia de poliza
	var fecha = new Date();
	fecha = fecha.setDate(fecha.getDate());
	$('.date-picker-2').datepicker({ language : 'es', weekStart : 0, autoclose: true, endDate: new Date(fecha)}).next().on(ace.click_event, function(){
	});
	//Fin Fecha de vigencia de poliza	


	$(function() {

		$('[data-rel=tooltip]').tooltip();

		$('[data-rel=popover]').popover({
			html:true,
			container: 'body'
		});

		$(".select2").css('width','150px').select2({allowClear:true})
				.on('change', function(){
					$(this).closest('form').validate().element($(this));
		});

	});
	
	$(function() {

		$('textarea[class*=autosize]').autosize({append: "\n"});
		$('textarea[class*=limited]').each(function() {
			var limit = parseInt($(this).attr('data-maxlength')) || 100;
			$(this).inputlimiter({
				"limit": limit,
				remText: '%n disponible%s...',
				limitText: 'caracteres maximos : %n.', lineReturnCount:2
			});
		});

		$(".text").css ("width","100%");$("input").keydown(function(e){var key;var isShift;if(window.event){key=window.event.keyCode;isShift=!!window.event.shiftKey}else{key=ev.which;isShift=!!ev.shiftKey}if(!isShift){if(e.keyCode==219){return false}}});$('textarea').keydown(function(e){var key;var isShift;if(window.event){key=window.event.keyCode;isShift=!!window.event.shiftKey}else{key=ev.which;isShift=!!ev.shiftKey}if(!isShift){if(e.keyCode==219){return false}}});
	});
	
	
	
	
	$(function () {
        $('#theFileId').ace_file_input({
            no_file: 'Adjuntar frente de p\u00F3liza ...',
            btn_choose: 'Adjuntar',
            btn_change: 'Cambiar',
            droppable: false,
            onchange: null,
            thumbnail: false
        });
		
        $('.date-picker').datepicker({language: 'es', weekStart: 0, autoclose: true, todayBtn: "linked", orientation: 'auto'}).next().on(ace.click_event, function () {
            $(this).prev().focus();
        }).on('click', function () {
            $(this).prev().focus();
        });
        // para el datepicker

        $('[data-rel=tooltip]').tooltip();

        $(".text").css ("width", "100%");
        $("input").keydown(function (e) {
            var key;
            var isShift;
            if (window.event) {
                key = window.event.keyCode;
                isShift = !!window.event.shiftKey
            } else {
                key = ev.which;
                isShift = !!ev.shiftKey
            }
            if (!isShift) {
                if (e.keyCode == 219) {
                    return false
                }
            }
        });
        $('textarea').keydown(function (e) {
            var key;
            var isShift;
            if (window.event) {
                key = window.event.keyCode;
                isShift = !!window.event.shiftKey
            } else {
                key = ev.which;
                isShift = !!ev.shiftKey
            }
            if (!isShift) {
                if (e.keyCode == 219) {
                    return false
                }
            }
        });
        $(".ace-file-input").css("margin-bottom", "0px");
        $(".show-icon-asterisk").css("display", "none");
        $(".show-checkbox-seguro").css("display", "none");
        $(".show-checkbox-life").css("display", "none");
        $("#divCheckboxProductosActivosId").css("display","none");
        $('#labelProdActivos').css("display","none");
    });
	
</script>

<script>
var codigoProductor = $("#codigoProductor").val(); 
if(codigoProductor == ''){
	$.gritter.add({
		title: '<i class="icon-exclamation-sign bigger-120"></i>&nbsp;Atenci&oacute;n',
		text: 'No se cargaron los datos del Productor, vuelva a intentar',
		class_name: 'gritter-warning'
	});
}
</script>

